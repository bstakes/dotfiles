#!/usr/bin/env zsh
export PS1="%~ > "

autoload -Uz compinit && compinit
autoload -U colors && colors
autoload -Uz vcs_info

precmd_vcs_info() { vcs_info }
precmd_functions+=( precmd_vcs_info )
setopt prompt_subst
zstyle ':vcs_info:git:*' formats '%b'

# https://dougblack.io/words/zsh-vi-mode.html
function zle-line-init zle-keymap-select {
  VIM_PROMPT="%{$fg_bold[yellow]%} [% NORMAL]% %{$reset_color%}"
  if [[ -z "$vcs_info_msg_0_" ]]; then
    VCS_PROMPT=""
  else
    VCS_PROMPT="%{$fg_bold[green]%} [% $vcs_info_msg_0_]% %{$reset_color%}"
  fi
  RPS1="${${KEYMAP/vicmd/$VIM_PROMPT}/(main|viins)/} $VCS_PROMPT $EPS1"
  zle reset-prompt
}

zle -N zle-line-init
zle -N zle-keymap-select

eval "$(thefuck --alias)"

# vi mode
bindkey -v
export KEYTIMEOUT=1
